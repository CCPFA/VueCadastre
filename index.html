<!DOCTYPE html>
<html>
<head>
    <title>Vue Cadastre</title>

    <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.7/leaflet.css" />
    <link rel="stylesheet" href="https://domoritz.github.io/leaflet-locatecontrol/dist/L.Control.Locate.min.css" />
    <link href='https://api.mapbox.com/mapbox.js/plugins/leaflet-locatecontrol/v0.43.0/css/font-awesome.min.css' rel='stylesheet' />

    <script src="http://cdn.leafletjs.com/leaflet-0.7/leaflet.js"></script>
    <script src="http://makinacorpus.github.io/Leaflet.FileLayer/leaflet.filelayer.js"></script>
    <script src="http://makinacorpus.github.io/Leaflet.FileLayer/togeojson/togeojson.js"></script>
    <script src="https://domoritz.github.io/leaflet-locatecontrol/dist/L.Control.Locate.min.js" charset="utf-8"></script>
    <style>
        #map {
            position: absolute;
            top:0;
            left: 0;
            right: 0;
            bottom:0;
        }
    </style>
</head>
<body>
    <div id="map"></div>

    <script type="text/javascript">

        var cadastre = L.tileLayer('http://tms.cadastre.openstreetmap.fr/*/tout/{z}/{x}/{y}.png', {
              maxZoom: 22,
              attribution: 'cadastre.gouv.fr',
            });
            osm = L.tileLayer('http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
	            maxZoom: 19,
	            attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
            }),
            sat = L.tileLayer('http://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {
              maxZoom: 18,
	             attribution: 'Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community'
            });

        var map = L.map('map', {
            center: [45.19089,5.70355],
            zoom: 18,
            layers: [sat,osm,cadastre]
        });

        var baseMaps = {
            "Satellite": sat,
            "OpenStreetMap": osm,
            "Cadastre": cadastre
        };

        var style = {color:'red', opacity: 1.0, fillOpacity: 0.1, weight: 2, clickable: true};
        L.Control.FileLayerLoad.LABEL = 'âŒ˜';
        L.Control.fileLayerLoad({
            fitBounds: true,
            layerOptions: {style: style,
                           pointToLayer: function (data, latlng) {
                              return L.marker(latlng, {style: style}).bindPopup(data['properties']['Description']);
                           }},
        }).addTo(map);
        L.control.locate({
          position: 'topleft',
          strings: {
            title: "Se localiser"
            }
          }).addTo(map);
        L.control.scale({imperial: false}).addTo(map);
	      L.control.layers(baseMaps).addTo(map);

    </script>
</body>
</html>
